---
page_title: "Conduktor : conduktor_console_kafka_subject_v2 "
subcategory: "console/v2"
description: |-
    Resource for managing Kafka subjects definition linked to an existing Kafka schema cluster definition inside Conduktor Console.
    This resource allows you to create, read, update and delete Kafka subjects connections from Conduktor Console.
---

# conduktor_console_kafka_subject_v2

Resource for managing Kafka subjects definition linked to an existing Kafka schema cluster definition inside Conduktor Console.
This resource allows you to create, read, update and delete Kafka subjects connections from Conduktor Console.

## Example Usage

### Minimal Kafka subject
This example creates a simple Kafka subject with minimal configuration.
```terraform
resource "conduktor_console_kafka_subject_v2" "minimal" {
  name    = "api-json-example-subject.value"
  cluster = "kafka-cluster"
  spec = {
    format = "JSON"
    schema = "{\"$id\":\"https://mycompany.com/myrecord\",\"$schema\":\"https://json-schema.org/draft/2019-09/schema\",\"type\":\"object\",\"title\":\"MyRecord\",\"description\":\"Json schema for MyRecord\",\"properties\":{\"id\":{\"type\":\"string\"},\"name\":{\"type\":[\"string\",\"null\"]}},\"required\":[\"id\"],\"additionalProperties\":false}"
  }
}
```

### Kafka subject JSON
This example creates a complex Kafka JSON subject with all available configuration.
```terraform
resource "conduktor_console_kafka_subject_v2" "json_full" {
  name    = "api-json-example-subject.value"
  cluster = "kafka-cluster"
  labels = {
    "team"        = "test"
    "environment" = "test"
  }
  spec = {
    format        = "JSON"
    compatibility = "BACKWARD"
    schema        = "{\"$id\":\"https://mycompany.com/myrecord\",\"$schema\":\"https://json-schema.org/draft/2019-09/schema\",\"type\":\"object\",\"title\":\"MyRecord\",\"description\":\"Json schema for MyRecord\",\"properties\":{\"id\":{\"type\":\"string\"},\"name\":{\"type\":[\"string\",\"null\"]}},\"required\":[\"id\"],\"additionalProperties\":false}"
    id            = 2
    version       = 2
    references = [
      {
        name    = "example-subject.value"
        subject = "example-subject.value"
        version = 1
      }
    ]
  }
}
```

### Kafka subject PROTOBUFF
This example creates a complex Kafka PROTOBUFF subject with all available configuration.
```terraform
resource "conduktor_console_kafka_subject_v2" "protobuff" {
  name    = "api-protobuff-example-subject.value"
  cluster = "kafka-cluster"
  labels = {
    "team"        = "test"
    "environment" = "test"
  }
  spec = {
    format        = "PROTOBUF"
    compatibility = "BACKWARD"
    schema        = "syntax = \"proto3\";\nmessage MyRecord {\n\tint32 id = 1;\n\tstring createdAt = 2;\n\tstring name = 3;\n}\n"
    id            = 2
    version       = 2
  }
}
```

### Kafka subject AVRO
This example creates a complex Kafka AVRO subject with all available configuration.
```terraform
resource "conduktor_console_kafka_subject_v2" "avro" {
  name    = "api-avro-example-subject.value"
  cluster = "kafka-cluster"
  labels = {
    "team"        = "test"
    "environment" = "test"
  }
  spec = {
    format        = "AVRO"
    compatibility = "FORWARD_TRANSITIVE"
    schema        = <<EOF
{
  "type": "record",
  "name": "MyRecord",
  "namespace": "com.mycompany",
  "fields": [
    {
      "name": "id",
      "type": "long"
    }
  ]
}
EOF
    id            = 1
    version       = 1
  }
}
```

### Kafka subject from file
This example creates a complex Kafka JSON subject with all available configuration.
```terraform
locals {
  file_content = file("${path.module}/schema.json")
}


resource "conduktor_console_kafka_subject_v2" "json_file" {
  name    = "api-json-example-subject.value"
  cluster = "kafka-cluster"
  labels = {
    "team"        = "test"
    "environment" = "test"
  }
  spec = {
    format        = "JSON"
    compatibility = "BACKWARD"
    schema        = local.file_content
    id            = 2
    version       = 2
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster` (String) Kafka cluster name linked with Kafka subject. Must already exist in Conduktor Console. Any change will require the Subject to be destroyed and re-created
- `name` (String) Kafka subject name, must be unique, acts as an ID for import - see naming strategy [here](https://docs.conduktor.io/guide/manage-kafka/kafka-resources/schema-registry#strategy)
- `spec` (Attributes) Kafka subject spec (see [below for nested schema](#nestedatt--spec))

### Optional

- `labels` (Map of String) Kafka connect server labels

<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `format` (String) Kafka subject format (AVRO, JSON, PROTOBUF)
- `schema` (String) Kafka subject schema

Optional:

- `compatibility` (String) Kafka subject compatibility (BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE, FULL, FULL_TRANSITIVE, NONE)
- `id` (Number) Kafka subject ID
- `references` (Attributes Set) Array of objects (SchemaReference) (see [below for nested schema](#nestedatt--spec--references))
- `version` (Number) Kafka subject version

<a id="nestedatt--spec--references"></a>
### Nested Schema for `spec.references`

Required:

- `name` (String) name required string
- `subject` (String) subject required string
- `version` (Number) version required integer





## Import

In order to import a Kafka subject, you need to know the Kafka cluster ID and the Kafka subject name.

The import ID is constructed as follows: `< cluster_id >/< subject_name >`.

For example, using an [`import` block](https://developer.hashicorp.com/terraform/language/import) :
```terraform
import {
  to = conduktor_console_kafka_subject_v2.example
  id = "my-cluster/import-subject"
}
```

Using the `terraform import` command:
```shell
terraform import conduktor_console_kafka_subject_v2.example mini-cluster/import-subject
```
