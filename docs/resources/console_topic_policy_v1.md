---
page_title: "Conduktor : conduktor_console_topic_policy_v1 "
subcategory: "self-serve/v1"
description: |-
    Resource for managing Conduktor Console self service topic policies.
    This resource allows you to create, read, update and delete topic policies in Conduktor.
---

# conduktor_console_topic_policy_v1

Resource for managing Conduktor topic policies.
This resource allows you to create, read, update and delete topic policies in Conduktor.

> [!NOTE]
> - This resource is officially supported from Conduktor Console `1.30.0` and newer.
> - Usage of this resource with older Console version might produce errors since the API might not support all types of constraints.

## Example Usage

### Simple topic policy
```terraform
resource "conduktor_console_topic_policy_v1" "simple" {
  name = "simple"
  spec = {
    policies = {
      "spec.configs.retention.ms" = {
        range = {
          optional = true
          max      = 3600000
          min      = 60000
        }
      }
    }
  }
}
```

### Complex topic policy
```terraform
resource "conduktor_console_topic_policy_v1" "complex" {
  name = "complex"
  spec = {
    policies = {
      "metadata.labels.data-criticality" = {
        one_of = {
          values = [
            "C0",
            "C1",
            "C2"
          ]
        }
      },
      "spec.configs.retention.ms" = {
        range = {
          optional = false
          max      = 3600000
          min      = 60000
        }
      },
      "spec.replicationFactor" = {
        none_of = {
          optional = true
          values = [
            "3",
          ]
        }
      },
      "metadata.name" = {
        match = {
          pattern = "^click.(?<event>[a-z0-9-]+).(avro|json)$"
        }
      },
      "spec.configs" = {
        allowed_keys = {
          keys = [
            "retention.ms",
            "cleanup.policy"
          ]
        }
      }
    }
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Topic Policy name, must be unique, acts as an ID for import
- `spec` (Attributes) Topic Policy specification (see [below for nested schema](#nestedatt--spec))

<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `policies` (Attributes Map) Map of policies (see [below for nested schema](#nestedatt--spec--policies))

<a id="nestedatt--spec--policies"></a>
### Nested Schema for `spec.policies`

Optional:

- `allowed_keys` (Attributes) Validates the keys are within an allowed key list (see [below for nested schema](#nestedatt--spec--policies--allowed_keys))
- `match` (Attributes) Validates using Regular Expression (see [below for nested schema](#nestedatt--spec--policies--match))
- `none_of` (Attributes) Validates against a list of predefined options (see [below for nested schema](#nestedatt--spec--policies--none_of))
- `one_of` (Attributes) Validates against a list of predefined options (see [below for nested schema](#nestedatt--spec--policies--one_of))
- `range` (Attributes) Validates a range of numbers (see [below for nested schema](#nestedatt--spec--policies--range))

<a id="nestedatt--spec--policies--allowed_keys"></a>
### Nested Schema for `spec.policies.allowed_keys`

Required:

- `keys` (Set of String)

Optional:

- `optional` (Boolean) If set to true, the policy is optional


<a id="nestedatt--spec--policies--match"></a>
### Nested Schema for `spec.policies.match`

Required:

- `pattern` (String)

Optional:

- `optional` (Boolean) If set to true, the policy is optional


<a id="nestedatt--spec--policies--none_of"></a>
### Nested Schema for `spec.policies.none_of`

Required:

- `values` (Set of String)

Optional:

- `optional` (Boolean) If set to true, the policy is optional


<a id="nestedatt--spec--policies--one_of"></a>
### Nested Schema for `spec.policies.one_of`

Required:

- `values` (Set of String)

Optional:

- `optional` (Boolean) If set to true, the policy is optional


<a id="nestedatt--spec--policies--range"></a>
### Nested Schema for `spec.policies.range`

Required:

- `max` (Number)
- `min` (Number)

Optional:

- `optional` (Boolean) If set to true, the policy is optional





