---
page_title: "Conduktor : conduktor_gateway_virtual_cluster_v2 "
subcategory: "gateway/v2"
description: |-
    Resource for managing Conduktor Gateway Virtual Clusters.
    This resource allows you to create, read, update and delete virtual clusters in Conduktor Gateway.
    For a full description of what Gateway virtual clusters are, refer to our [docs site](https://docs.conduktor.io/guide/conduktor-concepts/virtual-clusters).
---

# conduktor_gateway_virtual_cluster_v2

Resource for managing Conduktor virtual clusters.
This resource allows you to create, read, update and delete virtual clusters in Conduktor Gateway.

## WARNING
Minimum requirement for this resource:
 - Conduktor Gateway version `3.6.0`.

Minimum recommended version for this resource:
 - Conduktor Gateway version `3.11.0`.

Usage of this resource with older Gateway versions might result in unexpected behavior.
 - e.g. `acl_mode` and `acls` have been made available from Conduktor Gateway `3.11.0`.

## Example Usage

### Simple virtual cluster without ACLs
```terraform
resource "conduktor_gateway_virtual_cluster_v2" "simple" {
  name = "simple"
  spec = {
    acl_enabled = false
    type        = "Standard"
    acl_mode    = "KAFKA_API"
    super_users = [
      "user1"
    ]
  }
}
```

### Complex virtual cluster with ACLs
```terraform
resource "conduktor_gateway_virtual_cluster_v2" "complex" {
  name = "complex"
  spec = {
    acl_enabled = true
    acl_mode    = "REST_API"
    type        = "Standard"
    acls = [
      {
        resource_pattern = {
          resource_type = "TOPIC"
          name          = "customers"
          pattern_type  = "LITERAL"
        }
        principal       = "User:username1"
        host            = "*"
        operation       = "READ"
        permission_type = "ALLOW"
      },
      {
        resource_pattern = {
          resource_type = "TOPIC"
          name          = "customers"
          pattern_type  = "LITERAL"
        }
        principal       = "User:username1"
        host            = "*"
        operation       = "WRITE"
        permission_type = "ALLOW"
      }
    ]
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the virtual cluster, must be unique, acts as an ID for import
- `spec` (Attributes) Virtual Cluster specification (see [below for nested schema](#nestedatt--spec))

<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Optional:

- `acl_enabled` (Boolean) Enable ACL checks on all Kafka API calls to this virtual cluster. Depending on the value of the `acl_mode` field, acls are required to be set in different ways. See the `acl_mode` field for more details
- `acl_mode` (String) The mode defines how the ACLs will be managed on the virtual cluster. Can only be either `KAFKA_API` or `REST_API`. See [documentation](https://docs.conduktor.io/guide/reference/gateway-reference#virtualcluster) for more information. NOTE: this field has been introduced with Gateway `3.11.0` and it will not work with previous versions
- `acls` (Attributes Set) List of ACL bindings for the virtual cluster. Only required if `spec.acl_mode` is set to `REST_API`. See [documentation](https://docs.conduktor.io/guide/reference/gateway-reference#virtualcluster) for more information. NOTE: this field has been introduced with Gateway `3.11.0` and it will not work with previous versions (see [below for nested schema](#nestedatt--spec--acls))
- `super_users` (Set of String) List of usernames for which the associated service accounts in this virtual cluster can bypass ACLs. Required only if `spec.acl_mode` is set to `KAFKA_API`
- `type` (String) The type of the virtual cluster. Can only be either `Standard` or `Partner`

Read-Only:

- `bootstrap_servers` (String) Read only field. The bootstrap servers to create a connection to the virtual cluster. This field is automatically managed by the gateway
- `client_properties` (Map of Map of String) Read only field. Depending on gateway config, different kind of authentication can be used: `MTLS`, `PLAIN` and `OAUTHBEARER`

<a id="nestedatt--spec--acls"></a>
### Nested Schema for `spec.acls`

Required:

- `host` (String) Host of the ACL
- `operation` (String) Set of all operations to apply on the resource. Valid values are: `ALL`, `ALTER`, `ALTER_CONFIGS`, `CLUSTER_ACTION`, `CREATE`, `CREATE_TOKENS`, `DELETE`, `DESCRIBE`, `DESCRIBE_CONFIGS`, `DESCRIBE_TOKENS`, `IDEMPOTENT_WRITE`, `READ`, `UNKNOWN`, `WRITE`
- `permission_type` (String) Permission Type for Access Control Entry. Valid values are: ALLOW, DENY
- `principal` (String) Who or what the ACL applies to
- `resource_pattern` (Attributes) The resource pattern to apply the ACL to (see [below for nested schema](#nestedatt--spec--acls--resource_pattern))

<a id="nestedatt--spec--acls--resource_pattern"></a>
### Nested Schema for `spec.acls.resource_pattern`

Required:

- `name` (String) The name or pattern matching the name associated with the resource. Wildcards (e.g. `*`) are supported
- `pattern_type` (String) Type of the pattern to apply ACL on. Valid values are: `ANY`, `LITERAL`, `MATCH`, `PREFIXED`, `UNKNOWN`
- `resource_type` (String) Type of the resource to apply ACL on. Valid values are: `ANY`, `CLUSTER`, `DELEGATION_TOKEN`, `GROUP`, `TOPIC`, `TRANSACTIONAL_ID`, `UNKNOWN`






## Import

In order to import an existing Conduktor Gateway Virtual Cluster, you need to know the virtual cluster's unique name.

The import ID is the virtual cluster name.

For example, using an [`import` block](https://developer.hashicorp.com/terraform/language/import) :
```terraform
import {
  to = conduktor_gateway_virtual_cluster_v2.example
  id = "vcluster_name" # Import vcluster_name Virtual Cluster
}
```

Using the `terraform import` command:
```shell
terraform import conduktor_gateway_virtual_cluster_v2.example vcluster_name
```

